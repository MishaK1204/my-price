@if (loading()) {
  <div class="search-loading">
    იტვირთება...
  </div>
}

@if (!loading() && !error()) {
  <my-price-carousel>
    @for (cat of categories(); track cat.title) {
      <my-price-category-item
        [data]="cat"
        [selected]="selectedKey() === cat.key"
        (select)="onSelectCategory($event)"
      ></my-price-category-item>
    }
  </my-price-carousel>

  <my-price-carousel>
    @for (store of visibleStores(); track store.title) {
      <my-price-store-item
        [data]="store"
        [selected]="isStoreSelected(store.key)"
        (click)="onToggleStore(store.key)"
      ></my-price-store-item>
    }
  </my-price-carousel>

  @if (productsLoading()) {
    <div class="search-loading">
      იტვირთება...
    </div>
  }

  @if (!productsLoading() && products() && products().length > 0) {
    <div class="products-grid">
      @for (p of pagedProducts(); track p.name) {
        <my-price-product-item
          [product]="p"
        ></my-price-product-item>
      }
    </div>
    <my-price-pagination
      [totalItems]="products().length"
      [pageSize]="pageSize()"
      [currentPage]="currentPage()"
      (pageChange)="onPageChange($event)"
    ></my-price-pagination>
  }
}

@if (error()) {
  <div class="search-error">{{ error() }}</div>
}
